{"version":3,"file":"index.js","mappings":"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","sources":["webpack://react-simple-multi-language/./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js","webpack://react-simple-multi-language/./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.min.js","webpack://react-simple-multi-language/./node_modules/use-sync-external-store/shim/index.js","webpack://react-simple-multi-language/./node_modules/use-sync-external-store/shim/with-selector.js","webpack://react-simple-multi-language/external commonjs2 {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"React\",\"root\":\"React\"}","webpack://react-simple-multi-language/webpack/bootstrap","webpack://react-simple-multi-language/webpack/runtime/define property getters","webpack://react-simple-multi-language/webpack/runtime/hasOwnProperty shorthand","webpack://react-simple-multi-language/webpack/runtime/make namespace object","webpack://react-simple-multi-language/./lib/store.ts","webpack://react-simple-multi-language/./lib/utils.ts","webpack://react-simple-multi-language/./lib/component.tsx"],"sourcesContent":["/**\n * @license React\n * use-sync-external-store-shim.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var e=require(\"react\");function h(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var k=\"function\"===typeof Object.is?Object.is:h,l=e.useState,m=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function q(a,b){var d=b(),f=l({inst:{value:d,getSnapshot:b}}),c=f[0].inst,g=f[1];n(function(){c.value=d;c.getSnapshot=b;r(c)&&g({inst:c})},[a,d,b]);m(function(){r(c)&&g({inst:c});return a(function(){r(c)&&g({inst:c})})},[a]);p(d);return d}\nfunction r(a){var b=a.getSnapshot;a=a.value;try{var d=b();return!k(a,d)}catch(f){return!0}}function t(a,b){return b()}var u=\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement?t:q;exports.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:u;\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var h=require(\"react\"),n=require(\"use-sync-external-store/shim\");function p(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var q=\"function\"===typeof Object.is?Object.is:p,r=n.useSyncExternalStore,t=h.useRef,u=h.useEffect,v=h.useMemo,w=h.useDebugValue;\nexports.useSyncExternalStoreWithSelector=function(a,b,e,l,g){var c=t(null);if(null===c.current){var f={hasValue:!1,value:null};c.current=f}else f=c.current;c=v(function(){function a(a){if(!c){c=!0;d=a;a=l(a);if(void 0!==g&&f.hasValue){var b=f.value;if(g(b,a))return k=b}return k=a}b=k;if(q(d,a))return b;var e=l(a);if(void 0!==g&&g(b,e))return b;d=a;return k=e}var c=!1,d,k,m=void 0===e?null:e;return[function(){return a(b())},null===m?void 0:function(){return a(m())}]},[b,e,l,g]);var d=r(a,c[0],c[1]);\nu(function(){f.hasValue=!0;f.value=d},[d]);w(d);return d};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.min.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.min.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","module.exports = require(\"react\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { LanguageContextType } from \"./types\";\r\n\r\nconst createStore = <TState extends unknown>(initialState: TState) => {\r\n  type Listener = (state: TState, prevState: TState) => void;\r\n  let state: TState = initialState;\r\n  const listeners: Set<Listener> = new Set();\r\n\r\n  const setState = (partial: TState) => {\r\n    const nextState =\r\n      typeof partial === \"function\"\r\n        ? (partial as (state: TState) => TState)(state)\r\n        : partial;\r\n    if (!Object.is(nextState, state)) {\r\n      const previousState = state;\r\n      state = Object.assign({}, state, nextState);\r\n      listeners.forEach((listener) => listener(state, previousState));\r\n    }\r\n  };\r\n\r\n  const getState = (): TState => state;\r\n\r\n  const subscribe = (listener: Listener) => {\r\n    listeners.add(listener);\r\n\r\n    return () => listeners.delete(listener);\r\n  };\r\n\r\n  return { setState, getState, subscribe };\r\n};\r\n\r\nexport const languageStore = createStore<{\r\n  currentLanguage: string;\r\n  translations: LanguageContextType;\r\n}>({ translations: {}, currentLanguage: \"\" });\r\n","import { languageStore } from \"./store\";\r\nimport { ParamsType } from \"./types\";\r\n\r\nconst getPropertyWithKeyIdentifier = (\r\n  ob: {},\r\n  key: string\r\n): string | undefined =>\r\n  key\r\n    .split(\".\")\r\n    .reduce(\r\n      (prev, current) => prev?.[current as keyof typeof ob],\r\n      ob as string\r\n    );\r\n\r\nconst generateCacheId = (\r\n  id: string,\r\n  currentLang: string,\r\n  params?: ParamsType\r\n) =>\r\n  params\r\n    ? id +\r\n      Object.values(params)\r\n        .map((e) => (typeof e === \"string\" ? e : e[currentLang]))\r\n        .join(\"-\")\r\n    : \"\";\r\n\r\nconst cacheTranslate = () => {\r\n  let cache: { [key: string]: string } = {};\r\n  let translationConfig = languageStore.getState();\r\n  languageStore.subscribe((newConfig) => {\r\n    if (translationConfig.currentLanguage !== newConfig.currentLanguage)\r\n      cache = {};\r\n    translationConfig = newConfig;\r\n  });\r\n\r\n  return (id: string, params?: ParamsType) => {\r\n    const cacheId = generateCacheId(\r\n      id,\r\n      translationConfig.currentLanguage,\r\n      params\r\n    );\r\n    console.log(id);\r\n    if (cache[cacheId]) return cache[cacheId];\r\n\r\n    const { currentLanguage, translations } = translationConfig;\r\n    const messages = translations[currentLanguage];\r\n    console.log(id, messages);\r\n    if (!messages || !Object.keys(messages)?.length) return id;\r\n\r\n    const text = getPropertyWithKeyIdentifier(messages, id);\r\n\r\n    if (!text) return id;\r\n\r\n    if (params) {\r\n      const parsedText = Object.keys(params).reduce((prev, current) => {\r\n        const regex = new RegExp(`{${current}}`, \"g\");\r\n\r\n        const translate =\r\n          typeof params[current] === \"string\"\r\n            ? params[current]\r\n            : (params[current] as unknown as any)[currentLanguage];\r\n        return prev.replace(regex, translate);\r\n      }, text);\r\n      cache[cacheId] = parsedText;\r\n\r\n      return parsedText;\r\n    } else {\r\n      return text;\r\n    }\r\n  };\r\n};\r\n\r\nexport const t = cacheTranslate();\r\n\r\nexport const createConstantTranslation = (id: string, params?: ParamsType) => {\r\n  const tr = {\r\n    get translation() {\r\n      return t(id, params);\r\n    },\r\n  };\r\n\r\n  return tr;\r\n};\r\n","import { useDebugValue } from \"react\";\r\nimport useSyncExternalStoreExports from \"use-sync-external-store/shim/with-selector\";\r\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\r\n\r\nimport { languageStore } from \"./store\";\r\nimport { ParamsType } from \"./types\";\r\nimport { t } from \"./utils\";\r\n\r\nexport const useUpdateComponentWhenLanguageChange = () => {\r\n  const conf = useSyncExternalStoreWithSelector(\r\n    languageStore.subscribe,\r\n    languageStore.getState,\r\n    languageStore.getState,\r\n    (s) => s\r\n  );\r\n\r\n  useDebugValue(conf);\r\n\r\n  return conf;\r\n};\r\n\r\nexport const I18nText = ({\r\n  id,\r\n  params,\r\n}: {\r\n  params?: ParamsType;\r\n  id: string;\r\n}) => {\r\n  useUpdateComponentWhenLanguageChange();\r\n  return t(id, params);\r\n};\r\n"],"names":["e","k","Object","is","a","b","l","useState","m","useEffect","n","useLayoutEffect","p","useDebugValue","r","getSnapshot","value","d","f","u","window","document","createElement","inst","c","g","exports","useSyncExternalStore","h","q","t","useRef","v","useMemo","w","useSyncExternalStoreWithSelector","current","hasValue","module","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","definition","key","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","languageStore","initialState","state","translations","currentLanguage","listeners","Set","setState","partial","nextState","previousState","assign","forEach","listener","getState","subscribe","add","delete","createStore","cache","translationConfig","newConfig","id","params","cacheId","currentLang","values","map","join","generateCacheId","console","log","messages","keys","length","text","ob","split","reduce","prev","parsedText","regex","RegExp","translate","replace","cacheTranslate","createConstantTranslation","translation","useSyncExternalStoreExports","useUpdateComponentWhenLanguageChange","conf","s","I18nText"],"sourceRoot":""}